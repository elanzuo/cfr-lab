# Kuhn Poker 纳什均衡标准参考

Kuhn Poker 是一个经典的博弈论模型，由 Harold W. Kuhn 在 1950 年提出。它是一个双人零和博弈，牌组包含三张牌：J (0), Q (1), K (2)。

## 1. 纳什均衡推导公式

在 Kuhn Poker 中，存在无限多个纳什均衡点，这些均衡点通常由一个自由参数 $\alpha$ 决定。

- **$\alpha$**: 玩家 0 在持有 **J (0)** 时，起手选择 **下注 (Bet)** 的概率。
- **均衡约束**: 只有当 $0 \le \alpha \le \frac{1}{3}$ 时，策略集才能构成纳什均衡。

### 核心关联概率：
- **P0 持 K (2) 起手下注率**: 理论上应为 $3\alpha$。
- **P0 持 Q (1) 在 Pass-Bet 后跟注率**: 理论上应为 $\alpha + \frac{1}{3}$。
- **P1 持 Q (1) 在面对 Bet 时跟注率**: 理论上应固定为 $\frac{1}{3}$。

---

## 2. 详细节点策略表 (Nash Equilibrium)

以下表格列出了所有信息集（InfoSet）在纳什均衡下的标准动作概率。

### 玩家 0 (P0) 策略
| 信息集 | 手牌 | 历史序列 | 建议动作 | 概率公式/数值 | 说明 |
| :--- | :--- | :--- | :--- | :--- | :--- |
| `0` | J | (Start) | **Bet** | $\alpha \in [0, 1/3]$ | 混合策略诈唬 |
| `1` | Q | (Start) | **Pass** | $100\%$ | Q 领先 J 但落后 K，起手必过牌 |
| `2` | K | (Start) | **Bet** | $3\alpha$ | 价值下注，与诈唬频率挂钩 |
| `0pb` | J | Pass -> Bet | **Fold** | $100\%$ | 必输手牌，直接弃牌 |
| `1pb` | Q | Pass -> Bet | **Call** | $\alpha + 1/3$ | 抓诈唬频率 |
| `2pb` | K | Pass -> Bet | **Call** | $100\%$ | 必胜手牌，必跟注 |

### 玩家 1 (P1) 策略
| 信息集 | 手牌 | 历史序列 | 建议动作 | 概率公式/数值 | 说明 |
| :--- | :--- | :--- | :--- | :--- | :--- |
| `0p` | J | Pass | **Bet** | $1/3$ | 面对过牌时的诈唬 |
| `1p` | Q | Pass | **Pass** | $100\%$ | 永远选择摊牌 |
| `2p` | K | Pass | **Bet** | $100\%$ | 绝对价值下注 |
| `0b` | J | Bet | **Fold** | $100\%$ | 弃牌 |
| `1b` | Q | Bet | **Call** | $1/3$ | 抓诈唬频率，防止 P0 肆意诈唬 |
| `2b` | K | Bet | **Call** | $100\%$ | 必胜手牌，必跟注 |

---

## 3. 如何验证 CFR 算法是否收敛

在使用 CFR 算法（如 `cfr_backend.py`）进行训练时，可以通过以下指标快速判断：

1.  **收敛标志 1**: P1 在 `1p` 节点（持有 Q 面对过牌）的 Pass 概率是否接近 $100\%$。
2.  **收敛标志 2**: P1 在 `1b` 节点（持有 Q 面对下注）的 Bet (Call) 概率是否接近 $33.3\%$。
3.  **收敛标志 3**: P0 在 `0` 节点的 Bet 概率是否稳定在 $[0, 33.3\%]$ 之间。
4.  **收敛标志 4**: 检查 $P(2) = 3 \times P(0)$ 以及 $P(1pb) = P(0) + 1/3$ 的等式关系是否近似成立。

## 4. 博弈期望值 (Expected Value)
在纳什均衡下，玩家 0 的期望收益 (Value of the Game) 为：
$$V_0 = -\frac{1}{18} \approx -0.0555$$
这意味着 Kuhn Poker 是一个小微偏向于**后手 (Player 1)** 的博弈。
